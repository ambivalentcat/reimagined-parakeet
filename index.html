<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stranger Things | English Movie Club</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Outfit:wght@300;400;600;800&family=VT323&display=swap');

        :root {
            --bg-color: #050508;
            --surface-color: #12121c;
            --text-main: #f5f5f1;
            --text-muted: #a1a1aa;
            --accent-red: #E50914; 
            --accent-red-glow: rgba(229, 9, 20, 0.6);
        }

        body {
            font-family: 'Outfit', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            min-height: 100vh;
            transition: filter 1s ease-in-out, background-color 1s ease-in-out;
            overflow-x: hidden;
        }

        /* --- CRT TV EFFECT (Toggleable) --- */
        body.crt-enabled::before {
            content: " "; display: block; position: fixed;
            top: 0; left: 0; bottom: 0; right: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            z-index: 999; background-size: 100% 2px, 3px 100%; pointer-events: none;
        }
        body.crt-enabled::after {
            content: " "; display: block; position: fixed;
            top: 0; left: 0; bottom: 0; right: 0;
            background: radial-gradient(circle, rgba(0,0,0,0) 60%, rgba(0,0,0,0.6) 100%);
            z-index: 998; pointer-events: none;
        }

        /* --- THE UPSIDE DOWN MODE --- */
        body.upside-down {
            filter: hue-rotate(160deg) saturate(70%) contrast(120%);
            background-color: #010103;
        }
        
        .spore {
            position: fixed; background: rgba(255, 255, 255, 0.6);
            border-radius: 50%; pointer-events: none; z-index: 9999;
            animation: float-up linear infinite;
        }
        @keyframes float-up {
            0% { transform: translateY(100vh) scale(0); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-10vh) scale(1.5); opacity: 0; }
        }

        h1, h2, h3, .brand-font { font-family: 'Libre Baskerville', serif; }
        .typewriter-font { font-family: 'VT323', monospace; }

        /* --- NEON FLICKER ANIMATION --- */
        .red-glow-text {
            text-shadow: 0 0 10px var(--accent-red-glow), 0 0 20px var(--accent-red-glow);
            animation: neon-flicker 4s infinite alternate;
        }
        @keyframes neon-flicker {
            0%, 19%, 21%, 23%, 25%, 54%, 56%, 100% { text-shadow: 0 0 10px var(--accent-red-glow), 0 0 20px var(--accent-red-glow), 0 0 40px var(--accent-red-glow); opacity: 1; }
            20%, 24%, 55% { text-shadow: none; opacity: 0.8; }
        }

        .card-border { border: 1px solid #27272a; box-shadow: 0 4px 20px rgba(0,0,0,0.5); }

        .btn-primary { background-color: transparent; color: var(--accent-red); border: 2px solid var(--accent-red); transition: all 0.3s ease; }
        .btn-primary:hover { background-color: var(--accent-red); color: white; box-shadow: 0 0 15px var(--accent-red-glow); }

        .btn-outline { background-color: transparent; color: var(--text-muted); border: 1px solid #3f3f46; transition: all 0.3s; }
        .btn-outline:hover, .btn-active { background-color: #27272a !important; color: var(--accent-red) !important; border-color: var(--accent-red) !important; }

        /* 3D Flip Card CSS */
        .flip-card { background-color: transparent; height: 320px; perspective: 1000px; cursor: pointer; }
        .flip-card-inner {
            position: relative; width: 100%; height: 100%; text-align: left;
            transition: transform 0.6s cubic-bezier(0.4, 0.2, 0.2, 1); transform-style: preserve-3d;
        }
        .flip-card.flipped .flip-card-inner { transform: rotateY(180deg); }
        .flip-card-front, .flip-card-back {
            position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            -webkit-backface-visibility: hidden; backface-visibility: hidden;
            border-radius: 0.5rem; padding: 1.5rem; display: flex; flex-direction: column;
            border: 1px solid #27272a; transition: border-color 0.3s;
        }
        .flip-card-front { background-color: var(--surface-color); }
        .flip-card-back { background-color: #181825; transform: rotateY(180deg); border-color: var(--accent-red); }

        /* Secret Upside Down Card Style */
        .secret-card .flip-card-front { background-color: #1a0505; border-color: #4a0000; }
        .secret-card .flip-card-front h3 { color: #ff3333; text-shadow: 0 0 5px red; }

        /* Audio Button */
        .audio-btn {
            background: #27272a; border-radius: 50%; width: 36px; height: 36px;
            display: flex; justify-content: center; align-items: center;
            transition: all 0.2s; border: 1px solid #3f3f46; z-index: 5;
        }
        .audio-btn:hover { background: var(--accent-red); border-color: var(--accent-red); transform: scale(1.1); }

        .chart-container { position: relative; width: 100%; max-width: 800px; margin: 0 auto; height: 300px; max-height: 400px; }
        @media (min-width: 768px) { .chart-container { height: 350px; } }

        /* Spoiler & Bingo */
        .spoiler-content { filter: blur(8px); opacity: 0.5; user-select: none; transition: all 0.4s ease; }
        .spoiler-container.revealed .spoiler-content { filter: blur(0); opacity: 1; user-select: auto; }
        .spoiler-overlay {
            position: absolute; inset: 0; display: flex; align-items: center; justify-content: center;
            background: rgba(8, 8, 12, 0.6); z-index: 10; cursor: pointer; transition: opacity 0.3s ease;
            border: 1px dashed var(--accent-red); border-radius: 0.5rem;
        }
        .spoiler-container.revealed .spoiler-overlay { opacity: 0; pointer-events: none; }
        .found-item { text-decoration: line-through; text-decoration-color: var(--accent-red); opacity: 0.5; }
        
        @keyframes pulse-reward {
            0% { transform: scale(0.95); box-shadow: 0 0 0 0 var(--accent-red-glow); }
            70% { transform: scale(1); box-shadow: 0 0 0 15px transparent; }
            100% { transform: scale(0.95); box-shadow: 0 0 0 0 transparent; }
        }
        .reward-active { animation: pulse-reward 2s infinite; }

        /* Glitch text effect for hints */
        .glitch-hint { position: relative; color: #a1a1aa; }
        .glitch-hint::before {
            content: attr(data-text); position: absolute; left: -2px; text-shadow: 1px 0 red; 
            top: 0; color: #a1a1aa; background: var(--bg-color); overflow: hidden; clip: rect(0, 900px, 0, 0); animation: noise-anim-2 3s infinite linear alternate-reverse;
        }
        @keyframes noise-anim-2 {
            0% { clip: rect(3px, 9999px, 14px, 0); } 20% { clip: rect(10px, 9999px, 2px, 0); }
            40% { clip: rect(1px, 9999px, 8px, 0); } 60% { clip: rect(15px, 9999px, 11px, 0); }
            80% { clip: rect(5px, 9999px, 6px, 0); } 100% { clip: rect(12px, 9999px, 15px, 0); }
        }
    </style>
</head>
<body class="crt-enabled flex flex-col relative" id="main-body">

    <div id="particles" class="fixed inset-0 pointer-events-none z-0"></div>

    <!-- Navigation -->
    <header class="bg-[#08080c] text-white p-3 md:p-4 sticky top-0 z-50 border-b border-red-900 shadow-md relative">
        <div class="container mx-auto flex justify-between items-center">
            <div class="flex items-center gap-2">
                <span class="text-xl md:text-2xl brand-font font-bold text-[#E50914] tracking-widest uppercase">Movie Club</span>
                <span class="hidden lg:inline text-sm text-gray-500">| S1E1 Guide</span>
            </div>
            <nav class="flex gap-3 text-xs md:text-sm font-semibold items-center overflow-x-auto pb-1 md:pb-0">
                <button onclick="scrollToSection('vocab')" class="hover:text-[#E50914] transition-colors whitespace-nowrap">–õ–µ–∫—Å–∏–∫–∞</button>
                <button onclick="scrollToSection('watchlist')" class="hover:text-[#E50914] transition-colors whitespace-nowrap">–ë–∏–Ω–≥–æ</button>
                <button onclick="scrollToSection('discussion')" class="hover:text-[#E50914] transition-colors whitespace-nowrap">–†–∞–∑–±–æ—Ä</button>
                
                <!-- Toggles -->
                <div class="flex gap-2 border-l border-gray-700 pl-3 ml-1">
                    <button id="crt-btn" class="px-2 py-1 border border-gray-500 text-gray-400 rounded text-[10px] hover:text-white transition-colors" title="–í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç —Å—Ç–∞—Ä–æ–≥–æ –¢–í">CRT: ON</button>
                    <button id="upside-down-btn" class="px-2 md:px-3 py-1 border border-[#E50914] text-[#E50914] rounded text-xs hover:bg-[#E50914] hover:text-white transition-colors uppercase tracking-widest font-bold">
                        <span>–ò–∑–Ω–∞–Ω–∫–∞</span>
                    </button>
                </div>
            </nav>
        </div>
    </header>

    <!-- Event Hero Section -->
    <section class="py-12 md:py-20 px-4 relative flex flex-col items-center justify-center min-h-[65vh] z-10 border-b border-gray-900">
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] bg-[#E50914] opacity-[0.15] rounded-full blur-[120px] pointer-events-none"></div>

        <div class="container mx-auto text-center max-w-4xl relative z-10">
            <!-- Event Badge -->
            <div class="inline-flex items-center gap-2 border border-[#E50914] bg-red-900/20 px-4 py-2 rounded-full mb-8">
                <span class="animate-pulse">üçø</span>
                <span class="text-sm text-red-100 font-bold tracking-widest uppercase">English House Event</span>
            </div>
            
            <h1 class="text-6xl md:text-8xl font-bold mb-4 text-white brand-font uppercase tracking-wider red-glow-text leading-none">
                Stranger<br>Things
            </h1>
            <h2 class="text-xl md:text-2xl text-gray-300 font-light mb-10 italic">Episode 1: The Vanishing of Will Byers</h2>
            
            <!-- Event Details Banner -->
            <div class="bg-[#12121c] border border-gray-800 rounded-lg p-6 flex flex-col md:flex-row justify-center items-center gap-6 md:gap-12 mb-10 card-border w-max mx-auto">
                <div class="flex items-center gap-3">
                    <div class="text-3xl">üóìÔ∏è</div>
                    <div class="text-left">
                        <p class="text-xs text-gray-500 uppercase tracking-wider">Date</p>
                        <p class="font-bold text-white text-lg">28 –§–µ–≤—Ä–∞–ª—è</p>
                    </div>
                </div>
                <div class="hidden md:block w-px h-10 bg-gray-700"></div>
                <div class="flex items-center gap-3">
                    <div class="text-3xl">‚è∞</div>
                    <div class="text-left">
                        <p class="text-xs text-gray-500 uppercase tracking-wider">Time</p>
                        <p class="font-bold text-white text-lg">17:30 - 19:30</p>
                    </div>
                </div>
                <div class="hidden md:block w-px h-10 bg-gray-700"></div>
                <div class="flex items-center gap-3">
                    <div class="text-3xl">üìç</div>
                    <div class="text-left">
                        <p class="text-xs text-gray-500 uppercase tracking-wider">Location</p>
                        <p class="font-bold text-white text-lg">–ë–∞–∫—É–Ω–∏–Ω–∞, 80–ê</p>
                    </div>
                </div>
            </div>

            <button onclick="scrollToSection('vocab')" class="btn-primary py-3 px-10 rounded font-bold uppercase tracking-widest text-sm shadow-[0_0_20px_rgba(229,9,20,0.3)] hover:shadow-[0_0_30px_rgba(229,9,20,0.6)]">
                –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ –≤—Å—Ç—Ä–µ—á–µ
            </button>
        </div>
    </section>

    <!-- Vocabulary Section (Dynamic via JS) -->
    <section id="vocab" class="py-16 px-4 container mx-auto relative z-10">
        <div class="mb-10 text-center max-w-2xl mx-auto">
            <h2 class="text-3xl brand-font font-bold mb-4 text-[#E50914]" id="vocab-title">Vocabulary: Speak Like a Native</h2>
            <p class="text-gray-400 text-sm mb-2">–ù–∞–∂–∏–º–∞–π—Ç–µ –Ω–∞ <span class="text-white">üîä</span> —á—Ç–æ–±—ã —É—Å–ª—ã—à–∞—Ç—å –ø—Ä–æ–∏–∑–Ω–æ—à–µ–Ω–∏–µ.</p>
            <p class="text-[10px] uppercase font-mono glitch-hint" data-text="SOME WORDS ARE HIDDEN IN THE DARK">SOME WORDS ARE HIDDEN IN THE DARK</p>
            
            <div class="flex flex-wrap justify-center gap-2 mt-6" id="vocab-filters">
                <button class="btn-outline btn-active py-1 px-4 rounded-full text-xs transition-colors uppercase tracking-wider" data-filter="all">All Words</button>
                <button class="btn-outline py-1 px-4 rounded-full text-xs transition-colors uppercase tracking-wider" data-filter="action">Action</button>
                <button class="btn-outline py-1 px-4 rounded-full text-xs transition-colors uppercase tracking-wider" data-filter="nerd">Geek</button>
            </div>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6" id="vocab-grid"></div>
    </section>

    <!-- NEW: 80s Slang Spotlight -->
    <section class="py-12 px-4 relative z-10 bg-[#0a0a0f] border-y border-gray-900">
        <div class="container mx-auto max-w-4xl">
            <div class="flex flex-col md:flex-row items-center gap-8 bg-[#12121c] p-6 md:p-8 rounded-lg card-border relative overflow-hidden">
                <div class="absolute -right-10 -top-10 text-9xl opacity-5">ü§¨</div>
                <div class="w-full md:w-1/3 text-center md:text-left">
                    <p class="text-[#E50914] font-bold tracking-widest uppercase text-sm mb-2">80s Slang Spotlight</p>
                    <h3 class="text-4xl brand-font font-bold text-white mb-2">Mouthbreather</h3>
                    <button class="audio-btn text-white mx-auto md:mx-0 mt-4" onclick="playAudio(event, 'Mouthbreather')" title="Listen">üîä</button>
                </div>
                <div class="w-full md:w-2/3 border-t md:border-t-0 md:border-l border-gray-800 pt-6 md:pt-0 md:pl-8">
                    <p class="text-gray-300 text-sm mb-4"><strong class="text-white">–ü–µ—Ä–µ–≤–æ–¥:</strong> "–î—ã—à–∞—â–∏–π —Ä—Ç–æ–º", —Ç—É–ø–∏—Ü–∞, –±–æ–ª–≤–∞–Ω.</p>
                    <p class="text-gray-400 text-sm leading-relaxed mb-4">
                        –≠—Ç–æ –ª—é–±–∏–º–æ–µ –æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏–µ –ú–∞–π–∫–∞. –í 80-—Ö –≥–æ–¥–∞—Ö (–æ—Å–æ–±–µ–Ω–Ω–æ –±–ª–∞–≥–æ–¥–∞—Ä—è —Ñ–∏–ª—å–º—É "–ò–Ω–æ–ø–ª–∞–Ω–µ—Ç—è–Ω–∏–Ω" / E.T.) –¥–µ—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —ç—Ç–æ —Å–ª–æ–≤–æ –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è –Ω–µ –æ—á–µ–Ω—å —É–º–Ω—ã—Ö –ª—é–¥–µ–π, –∑–∞–¥–∏—Ä –∏–ª–∏ —Ç–µ—Ö, –∫—Ç–æ —Å—Ç–æ–∏—Ç —Å –æ—Ç–∫—Ä—ã—Ç—ã–º —Ä—Ç–æ–º –∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç.
                    </p>
                    <div class="bg-black/50 p-3 rounded border-l-2 border-[#E50914] text-gray-400 italic text-sm">
                        "He's a <span class="text-white font-bold">mouthbreather</span>. Just ignore him."
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Gamification: Watchlist Section -->
    <section id="watchlist" class="py-16 px-4 relative z-10">
        <div class="container mx-auto max-w-5xl">
            <div class="flex flex-col md:flex-row gap-8 items-center">
                <div class="w-full md:w-1/3 text-center md:text-left">
                    <h2 class="text-3xl brand-font font-bold mb-4 text-[#E50914]">Retro Bingo</h2>
                    <p class="text-gray-400 text-sm mb-4">
                        –ö–ª–∏–∫–∞–π—Ç–µ –Ω–∞ –ø—É–Ω–∫—Ç—ã, –∫–æ–≥–¥–∞ –∑–∞–º–µ—Ç–∏—Ç–µ —ç—Ç–∏ –¥–µ—Ç–∞–ª–∏ 80-—Ö –≤–æ –≤—Ä–µ–º—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞. –ù–∞–π–¥–µ—Ç–µ –≤—Å–µ 6?
                    </p>
                    <div class="text-6xl font-bold text-white mt-4 typewriter-font" id="score-display">0<span class="text-gray-600 text-4xl">/6</span></div>
                    
                    <div id="bingo-reward" class="hidden mt-6 bg-[#0a0a0f] border border-[#E50914] p-4 rounded text-center reward-active">
                        <p class="text-[#E50914] typewriter-font text-lg mb-1">>>> INCOMING TRANSMISSION...</p>
                        <p class="text-white font-bold italic">"He's here... The Demogorgon."</p>
                    </div>
                </div>
                <div class="w-full md:w-2/3 grid grid-cols-1 sm:grid-cols-2 gap-4" id="watchlist-grid"></div>
            </div>
        </div>
    </section>

    <!-- Context/Timeline Section -->
    <section id="timeline" class="py-16 px-4 bg-[#0a0a0f] border-t border-gray-900 relative z-10">
        <div class="container mx-auto">
            <div class="text-center mb-10">
                <h2 class="text-3xl brand-font font-bold mb-4 text-[#E50914]">Tension Tracker</h2>
                <p class="text-gray-400 max-w-2xl mx-auto text-sm">–ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Ç–æ—á–∫–∏ –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ, —á—Ç–æ–±—ã –∏–∑—É—á–∏—Ç—å, –∫–∞–∫ –≤—ã—Å—Ç—Ä–æ–µ–Ω —Å–∞—Å–ø–µ–Ω—Å –≤ —Å–µ—Ä–∏–∏ (–±–µ–∑ —Å–ø–æ–π–ª–µ—Ä–æ–≤).</p>
            </div>
            <div class="bg-[#12121c] p-4 md:p-6 rounded-lg card-border">
                <div class="chart-container"><canvas id="timelineChart"></canvas></div>
            </div>
            <div id="timeline-info" class="mt-6 p-6 bg-[#181825] rounded-lg border border-gray-700 min-h-[120px] transition-all hidden">
                <h3 id="tl-title" class="font-bold text-xl text-white mb-2 brand-font"></h3>
                <p id="tl-desc" class="text-gray-300 leading-relaxed text-sm"></p>
            </div>
        </div>
    </section>

    <!-- Discussion Section -->
    <section id="discussion" class="py-16 px-4 relative z-10">
        <div class="container mx-auto max-w-4xl">
            <h2 class="text-3xl brand-font font-bold mb-2 text-[#E50914]">Movie Club Discussion</h2>
            <p class="text-gray-400 mb-10 text-sm">–í–æ–ø—Ä–æ—Å—ã –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è –ø–æ—Å–ª–µ —Ç–∏—Ç—Ä–æ–≤. –ö–ª–∏–∫–Ω–∏—Ç–µ, —á—Ç–æ–±—ã —Å–Ω—è—Ç—å –∑–∞—â–∏—Ç—É –æ—Ç —Å–ø–æ–π–ª–µ—Ä–æ–≤.</p>
            <div class="space-y-4" id="discussion-container"></div>
        </div>
    </section>

    <footer class="bg-black text-gray-500 py-12 text-center border-t border-red-900 relative z-10">
        <p class="brand-font text-2xl mb-2 text-[#E50914] tracking-widest uppercase red-glow-text">Friends don't lie</p>
        <p class="text-sm typewriter-font">Created for the English House Movie Club</p>
    </footer>

    <script>
        // --- CRT Toggle Logic ---
        const crtBtn = document.getElementById('crt-btn');
        let crtActive = true;
        crtBtn.addEventListener('click', () => {
            crtActive = !crtActive;
            if(crtActive) {
                document.body.classList.add('crt-enabled');
                crtBtn.innerText = "CRT: ON";
                crtBtn.classList.replace('text-gray-500', 'text-gray-400');
            } else {
                document.body.classList.remove('crt-enabled');
                crtBtn.innerText = "CRT: OFF";
                crtBtn.classList.replace('text-gray-400', 'text-gray-500');
            }
        });

        // --- Vocabulary Data (Normal vs Upside Down) ---
        const normalVocab = [
            { word: "To Vanish", pron: "/Ààv√¶n…™ É/", type: "action", translation: "–ò—Å—á–µ–∑–Ω—É—Ç—å (–±–µ—Å—Å–ª–µ–¥–Ω–æ)", def: "To disappear suddenly and completely in a way that cannot be explained.", ctx: "Will vanishes on his way home." },
            { word: "Campaign", pron: "/k√¶mÀàpe…™n/", type: "nerd", translation: "–ö–∞–º–ø–∞–Ω–∏—è (–≤ –∏–≥—Ä–µ D&D)", def: "A series of interconnected adventures in a tabletop role-playing game.", ctx: "We're in the middle of a ten-hour campaign!" },
            { word: "Static", pron: "/Ààst√¶t…™k/", type: "action", translation: "–ü–æ–º–µ—Ö–∏ / –®—É–º", def: "Crackling or hissing noises on a telephone or radio.", ctx: "Joyce hears static and heavy breathing on the phone." },
            { word: "Search Party", pron: "/s…úÀêt É Ààp…ëÀêrti/", type: "action", translation: "–ü–æ–∏—Å–∫–æ–≤—ã–π –æ—Ç—Ä—è–¥", def: "A group of people organized to look for someone who is lost.", ctx: "The town organizes a search party in the woods." },
            { word: "Curfew", pron: "/Ààk…úÀêrfjuÀê/", type: "action", translation: "–ö–æ–º–µ–Ω–¥–∞–Ω—Ç—Å–∫–∏–π —á–∞—Å", def: "A rule requiring people to stay indoors between specified hours.", ctx: "The boys are supposed to be home before curfew." },
            { word: "Weirdo", pron: "/Ààw…™…ôrdo ä/", type: "nerd", translation: "–ß—É–¥–∏–∫", def: "A person whose behavior seems strange or eccentric.", ctx: "The bullies call the boys weirdos." }
        ];

        const secretVocab = [
            { word: "Demogorgon", pron: "/Àåd…õm…ôÀà…°…îÀêr…°…ôn/", type: "monster", translation: "–î–µ–º–æ–≥–æ—Ä–≥–æ–Ω", def: "A predatory humanoid creature from a parallel dimension.", ctx: "It got me! The Demogorgon!" },
            { word: "Dimension", pron: "/d…™Ààm…õn Én/", type: "science", translation: "–ò–∑–º–µ—Ä–µ–Ω–∏–µ", def: "A parallel universe or alternate reality.", ctx: "It came from another dimension." },
            { word: "Flesh", pron: "/fl…õ É/", type: "monster", translation: "–ü–ª–æ—Ç—å / –ú—è—Å–æ", def: "The soft substance consisting of muscle and fat that is found between the skin and bones.", ctx: "The monster hunts for flesh." },
            { word: "Portal", pron: "/Ààp…îÀêrtl/", type: "science", translation: "–ü–æ—Ä—Ç–∞–ª", def: "A doorway, gate, or other entrance, especially a large and imposing one leading to another world.", ctx: "A portal opened in the lab." },
            { word: "Contagion", pron: "/k…ônÀàte…™d í…ôn/", type: "science", translation: "–ó–∞—Ä–∞–∑–∞ / –ò–Ω—Ñ–µ–∫—Ü–∏—è", def: "The communication of disease from one person to another.", ctx: "The air is filled with toxic spores." },
            { word: "To Bleed", pron: "/bliÀêd/", type: "monster", translation: "–ö—Ä–æ–≤–æ—Ç–æ—á–∏—Ç—å", def: "To lose blood from the body as a result of injury or illness.", ctx: "It can smell when you bleed." }
        ];

        let activeVocab = normalVocab;

        // --- The Upside Down Logic ---
        const upsideDownBtn = document.getElementById('upside-down-btn');
        const body = document.getElementById('main-body');
        const particlesContainer = document.getElementById('particles');
        const vocabTitle = document.getElementById('vocab-title');
        let upsideDownActive = false;
        let particleInterval;

        function createParticle() {
            if(!upsideDownActive) return;
            const particle = document.createElement('div');
            particle.className = 'spore';
            const size = Math.random() * 5 + 1;
            particle.style.width = `${size}px`; particle.style.height = `${size}px`;
            particle.style.left = `${Math.random() * 100}vw`;
            particle.style.animationDuration = `${Math.random() * 10 + 5}s`;
            particlesContainer.appendChild(particle);
            setTimeout(() => { if(particle.parentNode) particle.parentNode.removeChild(particle); }, 15000);
        }

        upsideDownBtn.addEventListener('click', () => {
            upsideDownActive = !upsideDownActive;
            if(upsideDownActive) {
                // Activate
                body.classList.add('upside-down');
                upsideDownBtn.innerHTML = "<span>–í–µ—Ä–Ω—É—Ç—å—Å—è</span>";
                upsideDownBtn.classList.replace('text-[#E50914]', 'text-white');
                upsideDownBtn.classList.replace('border-[#E50914]', 'border-white');
                particleInterval = setInterval(createParticle, 200);
                
                // Swap Vocab
                activeVocab = secretVocab;
                vocabTitle.innerText = "Classified: The Upside Down";
                vocabTitle.classList.replace('text-[#E50914]', 'text-red-700');
                renderVocab('all');
                document.getElementById('vocab-filters').style.display = 'none'; // Hide filters in secret mode
            } else {
                // Deactivate
                body.classList.remove('upside-down');
                upsideDownBtn.innerHTML = "<span>–ò–∑–Ω–∞–Ω–∫–∞</span>";
                upsideDownBtn.classList.replace('text-white', 'text-[#E50914]');
                upsideDownBtn.classList.replace('border-white', 'border-[#E50914]');
                clearInterval(particleInterval);
                particlesContainer.innerHTML = '';
                
                // Restore Vocab
                activeVocab = normalVocab;
                vocabTitle.innerText = "Vocabulary: Speak Like a Native";
                vocabTitle.classList.replace('text-red-700', 'text-[#E50914]');
                renderVocab('all');
                document.getElementById('vocab-filters').style.display = 'flex';
            }
        });

        // --- Web Speech API (Pronunciation) ---
        function playAudio(event, word) {
            event.stopPropagation();
            if ('speechSynthesis' in window) {
                // Cancel any ongoing speech
                window.speechSynthesis.cancel();
                const utterance = new SpeechSynthesisUtterance(word);
                utterance.lang = 'en-US';
                
                // Make Upside Down voices sound deeper/slower if supported
                if (upsideDownActive) {
                    utterance.pitch = 0.5;
                    utterance.rate = 0.6;
                } else {
                    utterance.pitch = 1;
                    utterance.rate = 0.9;
                }
                
                window.speechSynthesis.speak(utterance);
            } else {
                alert("–ò–∑–≤–∏–Ω–∏—Ç–µ, –≤–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–∑–≤—É—á–∫—É —Ç–µ–∫—Å—Ç–∞.");
            }
        }

        // --- Render Vocabulary Cards ---
        function renderVocab(filterType) {
            const grid = document.getElementById('vocab-grid');
            grid.innerHTML = '';
            const filtered = filterType === 'all' ? activeVocab : activeVocab.filter(item => item.type === filterType);

            filtered.forEach(item => {
                const card = document.createElement('div');
                card.className = `flip-card ${upsideDownActive ? 'secret-card' : ''}`;
                card.onclick = () => card.classList.toggle('flipped');

                let badgeColor = 'text-gray-300 border-gray-600';
                if(item.type === 'action' || item.type === 'monster') badgeColor = 'text-red-400 border-red-800 bg-red-900/20'; 
                if(item.type === 'nerd' || item.type === 'science') badgeColor = 'text-blue-400 border-blue-800 bg-blue-900/20'; 

                card.innerHTML = `
                    <div class="flip-card-inner">
                        <div class="flip-card-front justify-between">
                            <div class="flex justify-between items-start">
                                <span class="inline-block px-2 py-1 text-[10px] font-bold uppercase tracking-wider rounded border ${badgeColor}">${item.type}</span>
                                <button class="audio-btn text-white" onclick="playAudio(event, '${item.word.replace(/'/g, "\\'")}')" title="Listen">üîä</button>
                            </div>
                            <div>
                                <h3 class="text-3xl font-bold text-white mb-1">${item.word}</h3>
                                <p class="text-sm text-gray-500 font-mono">${item.pron}</p>
                            </div>
                            <div class="flex justify-between items-center mt-4 pt-4 border-t ${upsideDownActive ? 'border-red-900/50' : 'border-gray-800'}">
                                <p class="text-xs ${upsideDownActive ? 'text-red-500' : 'text-[#E50914]'} font-bold uppercase tracking-widest">Click to translate</p>
                                <span class="text-gray-600 text-sm">üîÅ</span>
                            </div>
                        </div>
                        <div class="flip-card-back justify-between">
                            <div>
                                <h3 class="text-xl font-bold ${upsideDownActive ? 'text-red-500' : 'text-white'} mb-2 pb-2 border-b border-gray-700">${item.translation}</h3>
                                <p class="text-sm text-gray-400 leading-relaxed mt-3">${item.def}</p>
                            </div>
                            <div class="bg-[#08080c] p-3 text-sm text-gray-300 italic border-l-2 ${upsideDownActive ? 'border-red-600 text-red-300' : 'border-[#E50914]'} mt-4 rounded typewriter-font">
                                "${item.ctx}"
                            </div>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        document.querySelectorAll('#vocab-filters button').forEach(btn => {
            btn.addEventListener('click', (e) => {
                document.querySelectorAll('#vocab-filters button').forEach(b => b.classList.remove('btn-active'));
                e.target.classList.add('btn-active');
                renderVocab(e.target.dataset.filter);
            });
        });

        // --- Bingo Logic ---
        const watchlistItems = [
            { id: 1, text: "–ë—Ä–æ—Å–æ–∫ –∫—É–±–∏–∫–∞ D20", icon: "üé≤" },
            { id: 2, text: "–ú–µ—Ä—Ü–∞—é—â–∏–π —Å–≤–µ—Ç", icon: "üí°" },
            { id: 3, text: "–†–∞—Ü–∏—è (Walkie-talkie)", icon: "üìª" },
            { id: 4, text: "–¢–∞—Ç—É ¬´011¬ª", icon: "üëÅÔ∏è" },
            { id: 5, text: "–°—Ü–µ–Ω–∞ –≤ –∑–∞–∫—É—Å–æ—á–Ω–æ–π", icon: "üçî" },
            { id: 6, text: "–¢—Ä–µ–≤–æ–∂–Ω–∞—è —Å–∏–Ω—Ç-–º—É–∑—ã–∫–∞", icon: "üéπ" }
        ];
        let foundCount = 0;

        function renderWatchlist() {
            const grid = document.getElementById('watchlist-grid');
            watchlistItems.forEach(item => {
                const div = document.createElement('div');
                div.className = "bg-[#181825] p-4 rounded card-border cursor-pointer hover:bg-[#1f1f2e] transition-all flex items-center gap-3 group";
                div.onclick = () => toggleWatchlistItem(div, item.id);
                div.innerHTML = `
                    <div class="text-2xl opacity-70 group-hover:opacity-100 transition-opacity">${item.icon}</div>
                    <div class="text-sm font-semibold text-gray-300 item-text transition-all">${item.text}</div>
                    <div class="ml-auto min-w-[24px] h-6 rounded border-2 border-gray-600 flex items-center justify-center check-circle transition-colors"></div>
                `;
                grid.appendChild(div);
            });
        }

        function toggleWatchlistItem(element, id) {
            const textEl = element.querySelector('.item-text');
            const circle = element.querySelector('.check-circle');
            const rewardBox = document.getElementById('bingo-reward');
            
            if (element.classList.contains('active')) {
                element.classList.remove('active'); textEl.classList.remove('found-item');
                circle.classList.remove('bg-[#E50914]', 'border-[#E50914]'); circle.innerHTML = '';
                foundCount--;
            } else {
                element.classList.add('active'); textEl.classList.add('found-item');
                circle.classList.add('bg-[#E50914]', 'border-[#E50914]');
                circle.innerHTML = '<span class="text-white text-xs font-bold">‚úì</span>';
                foundCount++;
            }
            
            document.getElementById('score-display').innerHTML = `${foundCount}<span class="text-gray-600 text-4xl">/6</span>`;
            
            if(foundCount === 6) rewardBox.classList.remove('hidden');
            else rewardBox.classList.add('hidden');
        }

        // --- Timeline Chart Logic ---
        const timelineData = [
            { period: "–õ–∞–±", label: "–ò–Ω—Ü–∏–¥–µ–Ω—Ç", tension: 90, title: "–£—á–µ–Ω—ã–π –≤ –±–µ–¥–µ", desc: "–°–µ—Ä–∏—è –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ. –°–∞—Å–ø–µ–Ω—Å –Ω–∞ –º–∞–∫—Å–∏–º—É–º–µ —Å—Ä–∞–∑—É." },
            { period: "–î–æ–º", label: "D&D", tension: 20, title: "–°–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ 80-—Ö", desc: "–ö–æ–Ω—Ç—Ä–∞—Å—Ç–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥: –ø–æ–¥–≤–∞–ª, –¥–µ—Ç–∏ –∏–≥—Ä–∞—é—Ç. –ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å –≥–µ—Ä–æ—è–º–∏." },
            { period: "–õ–µ—Å", label: "–ü–æ—Ö–∏—â–µ–Ω–∏–µ", tension: 95, title: "–ò—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ –£–∏–ª–ª–∞", desc: "–£–∏–ª–ª –µ–¥–µ—Ç –æ–¥–∏–Ω. –ñ—É—Ç–∫–∞—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞, —Å–∏–ª—É—ç—Ç –Ω–∞ –¥–æ—Ä–æ–≥–µ, –±–µ–≥—Å—Ç–≤–æ." },
            { period: "–£—Ç—Ä–æ", label: "–ü–æ–∏—Å–∫–∏", tension: 40, title: "–†–µ–∞–∫—Ü–∏—è –≤–∑—Ä–æ—Å–ª—ã—Ö", desc: "–•–æ–ø–ø–µ—Ä –ª–µ–Ω–∏–≤–æ –ø—Ä–æ—Å—ã–ø–∞–µ—Ç—Å—è. –î–∂–æ–π—Å –≤ –ø–∞–Ω–∏–∫–µ. –ö–æ–Ω—Ç—Ä–∞—Å—Ç." },
            { period: "–ö–∞—Ñ–µ", label: "–û–¥–∏", tension: 70, title: "–í—Å—Ç—Ä–µ—á–∞ —Å 011", desc: "–ü–æ—è–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–Ω–æ–π –¥–µ–≤–æ—á–∫–∏ –≤ —Ä—É–±–∞—à–∫–µ. –ü—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–µ–Ω–Ω–∞—è —É–≥—Ä–æ–∑–∞." }
        ];

        function initChart() {
            const ctx = document.getElementById('timelineChart').getContext('2d');
            Chart.defaults.color = '#a1a1aa'; Chart.defaults.font.family = 'Outfit';

            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: timelineData.map(d => d.period),
                    datasets: [{
                        label: '–£—Ä–æ–≤–µ–Ω—å –ù–∞–ø—Ä—è–∂–µ–Ω–∏—è', data: timelineData.map(d => d.tension),
                        borderColor: '#E50914', backgroundColor: 'rgba(229, 9, 20, 0.1)',
                        borderWidth: 3, pointBackgroundColor: '#fff', pointBorderColor: '#E50914',
                        pointBorderWidth: 2, pointRadius: 6, pointHoverRadius: 10, tension: 0.4, fill: true
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    onClick: (event, activeElements) => {
                        if (activeElements.length > 0) showTimelineInfo(activeElements[0].index);
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            backgroundColor: '#181825', titleFont: { size: 14, weight: 'bold' },
                            bodyFont: { size: 13 }, padding: 12, borderColor: '#3f3f46', borderWidth: 1,
                            callbacks: { label: context => " " + timelineData[context.dataIndex].label }
                        }
                    },
                    scales: {
                        y: { beginAtZero: true, max: 100, ticks: { display: false }, grid: { display: false } },
                        x: { grid: { color: '#27272a' }, ticks: { color: '#a1a1aa' } }
                    }
                }
            });
        }

        function showTimelineInfo(index) {
            const infoBox = document.getElementById('timeline-info');
            document.getElementById('tl-title').innerText = timelineData[index].title;
            document.getElementById('tl-desc').innerText = timelineData[index].desc;
            infoBox.classList.remove('hidden');
            infoBox.style.opacity = '0'; infoBox.style.transform = 'translateY(10px)';
            setTimeout(() => {
                infoBox.style.transition = 'all 0.3s ease';
                infoBox.style.opacity = '1'; infoBox.style.transform = 'translateY(0)';
            }, 10);
        }

        // --- Discussion Logic ---
        const discussionQs = [
            { q: "The Roll of the Dice", a: "–ò–≥—Ä–∞ –≤ –ø–æ–¥–≤–∞–ª–µ –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç —Å—é–∂–µ—Ç. –£–∏–ª–ª –≤—ã–∫–∏–¥—ã–≤–∞–µ—Ç –∫—É–±–∏–∫ D20 –Ω–∞ '7' –∏ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ—Ç '–î–µ–º–æ–≥–æ—Ä–≥–æ–Ω—É'. –≠—Ç–æ –º–µ—Ç–∞—Ñ–æ—Ä–∞ —Ç–æ–≥–æ, —á—Ç–æ –æ–Ω –≤—Å—Ç—Ä–µ—Ç–∏—Ç –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ –º–æ–Ω—Å—Ç—Ä–∞ –∏ –Ω–µ —Å–º–æ–∂–µ—Ç —É–±–µ–∂–∞—Ç—å." },
            { q: "Adults vs. Kids", a: "–í–∑—Ä–æ—Å–ª—ã–µ (–ø–æ–ª–∏—Ü–∏—è, –•–æ–ø–ø–µ—Ä) –∏—â—É—Ç —Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã. –î–µ—Ç–∏ —Å—Ä–∞–∑—É –ø—Ä–∏–Ω–∏–º–∞—é—Ç —Ç–µ–æ—Ä–∏—é –∑–∞–≥–æ–≤–æ—Ä–∞ –∏ –º–æ–Ω—Å—Ç—Ä–æ–≤. –≠—Ç–æ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π —Ç—Ä–æ–ø —Ñ–∏–ª—å–º–æ–≤ 80-—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, The Goonies, E.T.)." },
            { q: "The Symbolism of Light", a: "–°–≤–µ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –∑–∞–º–µ–Ω–∞ —Å–∫—Ä–∏–º–µ—Ä–∞–º. –ö–æ–≥–¥–∞ –º–æ–Ω—Å—Ç—Ä —Ä—è–¥–æ–º, —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ —Å–±–æ–∏—Ç (—Ñ–∞—Ä–∞ –£–∏–ª–ª–∞, –ª–∞–º–ø–∞ –î–∂–æ–π—Å). –≠—Ç–æ –≤–∏–∑—É–∞–ª—å–Ω—ã–π —Å–∏–≥–Ω–∞–ª, —á—Ç–æ —Ç–æ–Ω–∫–∞—è –≥—Ä–∞–Ω—å –º–µ–∂–¥—É –º–∏—Ä–∞–º–∏ —Å—Ç–∏—Ä–∞–µ—Ç—Å—è." }
        ];

        function renderDiscussion() {
            const container = document.getElementById('discussion-container');
            discussionQs.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = "bg-[#12121c] rounded card-border p-5 md:p-6 relative spoiler-container overflow-hidden";
                div.innerHTML = `
                    <div class="flex items-start md:items-center gap-4 mb-2">
                        <span class="text-[#E50914] font-bold text-xl mt-1 md:mt-0">${index + 1}.</span>
                        <h3 class="text-lg md:text-xl font-bold text-white">${item.q}</h3>
                    </div>
                    <div class="relative mt-4">
                        <div class="spoiler-overlay text-white text-xs font-bold tracking-wide uppercase flex items-center justify-center gap-2 backdrop-blur-md" onclick="this.parentElement.parentElement.classList.add('revealed')">
                            <span class="text-[#E50914] text-xl">üëÅÔ∏è‚Äçüó®Ô∏è</span> Reveal Talking Points
                        </div>
                        <div class="spoiler-content text-gray-400 text-sm leading-relaxed border-l-2 border-[#E50914] pl-4 py-2">${item.a}</div>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function scrollToSection(id) { 
            const el = document.getElementById(id);
            if(el) {
                const y = el.getBoundingClientRect().top + window.scrollY - 80;
                window.scrollTo({top: y, behavior: 'smooth'});
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderVocab('all'); renderWatchlist(); initChart(); renderDiscussion();
            // Show glitch hint briefly
            setTimeout(() => {
                document.querySelector('.glitch-hint').style.display = 'block';
            }, 2000);
        });
    </script>
</body>
</html>
